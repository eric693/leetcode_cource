<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#188 Best Time to Buy and Sell Stock IV | LeetCode å­¸ç¿’å¹³å°</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; background: #f8fafc; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 4px 6px rgba(220, 38, 38, 0.2); }
        .header h1 { font-size: 2em; margin-bottom: 10px; }
        .difficulty { display: inline-block; padding: 6px 16px; background: rgba(255,255,255,0.2); border-radius: 20px; font-size: 0.9em; font-weight: 600; }
        .tags { margin-top: 15px; }
        .tag { display: inline-block; background: rgba(255,255,255,0.15); padding: 4px 12px; border-radius: 6px; margin-right: 8px; font-size: 0.85em; }
        .back-btn { display: inline-block; margin-bottom: 20px; padding: 10px 20px; background: #3b82f6; color: white; text-decoration: none; border-radius: 8px; transition: background 0.3s; }
        .back-btn:hover { background: #2563eb; }
        .section { background: white; padding: 30px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .section h2 { color: #1e293b; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid #dc2626; }
        .section h3 { color: #475569; margin: 25px 0 15px 0; font-size: 1.3em; }
        .code-block { background: #282c34; border-radius: 8px; overflow: hidden; margin: 15px 0; }
        .lang-tabs { display: flex; background: #21252b; border-bottom: 1px solid #181a1f; }
        .lang-tab { padding: 12px 24px; cursor: pointer; color: #abb2bf; border: none; background: none; transition: all 0.3s; font-weight: 500; }
        .lang-tab.active { color: #61afef; background: #282c34; border-bottom: 2px solid #61afef; }
        .lang-tab:hover { color: #61afef; background: #2c313a; }
        .code-content { display: none; }
        .code-content.active { display: block; }
        pre { margin: 0; }
        code { font-family: 'Consolas', 'Monaco', 'Courier New', monospace; font-size: 0.9em; }
        .example { background: #f0f9ff; border-left: 4px solid #3b82f6; padding: 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .example-title { font-weight: 700; color: #1e40af; margin-bottom: 12px; font-size: 1.05em; }
        .visual-box { background: #fef3c7; border: 2px solid #f59e0b; padding: 20px; border-radius: 8px; margin: 15px 0; }
        .visual-title { font-weight: 700; color: #92400e; margin-bottom: 12px; display: flex; align-items: center; font-size: 1.05em; }
        .complexity { background: #f1f5f9; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .complexity-item { margin: 8px 0; color: #475569; }
        .key-point { background: #dcfce7; border-left: 4px solid #16a34a; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        ul, ol { margin-left: 25px; margin-top: 10px; }
        li { margin: 8px 0; color: #475569; }
        strong { color: #1e293b; }
        .note { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .header h1 { font-size: 1.5em; }
            .section { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-btn">â† è¿”å›é¡Œç›®åˆ—è¡¨</a>
        
        <div class="header">
            <h1>#188 Best Time to Buy and Sell Stock IV</h1>
            <div class="difficulty">Hard</div>
            <div class="tags">
                <span class="tag">Array</span>
                <span class="tag">Dynamic Programming</span>
            </div>
        </div>

        <div class="section">
            <h2>é¡Œç›®æè¿°</h2>
            <p>çµ¦å®šä¸€å€‹æ•´æ•¸é™£åˆ— pricesï¼Œå…¶ä¸­ prices[i] è¡¨ç¤ºç¬¬ i å¤©çš„è‚¡ç¥¨åƒ¹æ ¼ã€‚</p>
            <p style="margin-top: 15px;">è¨­è¨ˆä¸€å€‹ç®—æ³•ä¾†è¨ˆç®—ä½ æ‰€èƒ½ç²å–çš„æœ€å¤§åˆ©æ½¤ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ <strong>k ç­†äº¤æ˜“</strong>ã€‚</p>
            <p style="margin-top: 15px;"><strong>æ³¨æ„ï¼š</strong></p>
            <ul>
                <li>ä½ ä¸èƒ½åŒæ™‚åƒèˆ‡å¤šç­†äº¤æ˜“ï¼ˆå¿…é ˆåœ¨å†æ¬¡è³¼è²·å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰</li>
                <li>ä¸€æ¬¡äº¤æ˜“ = è²·å…¥ + è³£å‡º</li>
            </ul>
        </div>

        <div class="section">
            <h2>ç¯„ä¾‹</h2>
            
            <div class="example">
                <div class="example-title">ç¯„ä¾‹ 1ï¼š</div>
                <strong>è¼¸å…¥ï¼š</strong>k = 2, prices = [2,4,1]<br>
                <strong>è¼¸å‡ºï¼š</strong>2<br>
                <strong>è§£é‡‹ï¼š</strong>åœ¨ç¬¬ 1 å¤© (åƒ¹æ ¼ = 2) è²·å…¥ï¼Œåœ¨ç¬¬ 2 å¤© (åƒ¹æ ¼ = 4) è³£å‡ºï¼Œåˆ©æ½¤ = 4-2 = 2
            </div>

            <div class="example">
                <div class="example-title">ç¯„ä¾‹ 2ï¼š</div>
                <strong>è¼¸å…¥ï¼š</strong>k = 2, prices = [3,2,6,5,0,3]<br>
                <strong>è¼¸å‡ºï¼š</strong>7<br>
                <strong>è§£é‡‹ï¼š</strong>
                <ul style="margin-top: 5px;">
                    <li>ç¬¬ 2 å¤© (åƒ¹æ ¼ = 2) è²·å…¥ï¼Œç¬¬ 3 å¤© (åƒ¹æ ¼ = 6) è³£å‡ºï¼Œåˆ©æ½¤ = 6-2 = 4</li>
                    <li>ç¬¬ 5 å¤© (åƒ¹æ ¼ = 0) è²·å…¥ï¼Œç¬¬ 6 å¤© (åƒ¹æ ¼ = 3) è³£å‡ºï¼Œåˆ©æ½¤ = 3-0 = 3</li>
                    <li>ç¸½åˆ©æ½¤ = 4 + 3 = 7</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>è§£é¡Œæ€è·¯</h2>
            
            <div class="visual-box">
                <div class="visual-title">ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µï¼šç‹€æ…‹æ©Ÿ DP</div>
                <p><strong>é—œéµæ´å¯Ÿï¼š</strong>ç¶­è­·æ¯æ¬¡äº¤æ˜“å¾Œçš„æœ€å¤§åˆ©æ½¤ç‹€æ…‹ã€‚</p>
                <ol style="margin-top: 10px;">
                    <li>å®šç¾©ç‹€æ…‹ï¼šç¬¬ i å¤©å®Œæˆ j æ¬¡äº¤æ˜“å¾Œçš„æœ€å¤§åˆ©æ½¤</li>
                    <li>å€åˆ†æŒæœ‰è‚¡ç¥¨å’Œä¸æŒæœ‰è‚¡ç¥¨å…©ç¨®ç‹€æ…‹</li>
                    <li>ç‹€æ…‹è½‰ç§»ï¼šè²·å…¥ã€è³£å‡ºã€ä¸æ“ä½œ</li>
                    <li>å„ªåŒ–ï¼šç•¶ k â‰¥ n/2 æ™‚ç­‰åŒæ–¼ç„¡é™æ¬¡äº¤æ˜“</li>
                </ol>
            </div>

            <h3>DP ç‹€æ…‹å®šç¾©</h3>
            <div class="visual-box">
                <div class="visual-title">ğŸ“Š ä¸‰ç¶­ DP</div>
                <pre style="background: white; padding: 15px; border-radius: 4px; margin-top: 10px;">
<strong>å®šç¾©ï¼š</strong>
buy[i][j]  = ç¬¬ i å¤©ï¼Œå®Œæˆ j æ¬¡äº¤æ˜“ï¼Œç•¶å‰æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ½¤
sell[i][j] = ç¬¬ i å¤©ï¼Œå®Œæˆ j æ¬¡äº¤æ˜“ï¼Œç•¶å‰ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ½¤

<strong>ç‚ºä»€éº¼éœ€è¦å…©å€‹ç‹€æ…‹ï¼Ÿ</strong>
å› ç‚ºæŒæœ‰è‚¡ç¥¨å’Œä¸æŒæœ‰è‚¡ç¥¨æ˜¯å…©ç¨®ä¸åŒçš„ç‹€æ…‹
éœ€è¦åˆ†åˆ¥è¨˜éŒ„

<strong>ä»€éº¼æ™‚å€™ç®—ã€Œå®Œæˆä¸€æ¬¡äº¤æ˜“ã€ï¼Ÿ</strong>
è²·å…¥æ™‚è¨ˆæ•¸ï¼ˆè³£å‡ºæ™‚å·²ç¶“è¨ˆæ•¸éäº†ï¼‰
æˆ–è€…ï¼šè³£å‡ºæ™‚è¨ˆæ•¸ï¼ˆè²·å…¥æ™‚é‚„æ²’å®Œæˆï¼‰

æœ¬é¡Œæ¡ç”¨ï¼šè³£å‡ºæ™‚è¨ˆæ•¸
                </pre>
            </div>

            <h3>ç‹€æ…‹è½‰ç§»æ–¹ç¨‹</h3>
            <div class="visual-box">
                <div class="visual-title">ğŸ”„ è½‰ç§»é‚è¼¯</div>
                <pre style="background: white; padding: 15px; border-radius: 4px; margin-top: 10px;">
<strong>buy[i][j] çš„è½‰ç§»ï¼š</strong>
ç¬¬ i å¤©æŒæœ‰è‚¡ç¥¨ï¼Œæœ‰å…©ç¨®ä¾†æºï¼š
1. æ˜¨å¤©å°±æŒæœ‰ï¼šbuy[i-1][j]
2. ä»Šå¤©è²·å…¥ï¼šsell[i-1][j] - prices[i]

buy[i][j] = max(buy[i-1][j], sell[i-1][j] - prices[i])

<strong>sell[i][j] çš„è½‰ç§»ï¼š</strong>
ç¬¬ i å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œæœ‰å…©ç¨®ä¾†æºï¼š
1. æ˜¨å¤©å°±ä¸æŒæœ‰ï¼šsell[i-1][j]
2. ä»Šå¤©è³£å‡ºï¼šbuy[i-1][j-1] + prices[i]
   ï¼ˆæ³¨æ„ï¼šè³£å‡ºå®Œæˆç¬¬ j æ¬¡äº¤æ˜“ï¼‰

sell[i][j] = max(sell[i-1][j], buy[i-1][j-1] + prices[i])

<strong>åˆå§‹åŒ–ï¼š</strong>
buy[0][0] = -prices[0]  (ç¬¬ä¸€å¤©è²·å…¥)
sell[0][0] = 0          (ç¬¬ä¸€å¤©ä¸æ“ä½œ)
å…¶ä»–ç‚ºè² ç„¡çª®ï¼ˆä¸å¯é”ï¼‰
                </pre>
            </div>

            <h3>å„ªåŒ–ï¼šk å¾ˆå¤§çš„æƒ…æ³</h3>
            <div class="visual-box">
                <div class="visual-title">ğŸš€ ç‰¹æ®Šå„ªåŒ–</div>
                <pre style="background: white; padding: 15px; border-radius: 4px; margin-top: 10px;">
<strong>è§€å¯Ÿï¼š</strong>
å¦‚æœ k >= n/2ï¼ˆn æ˜¯å¤©æ•¸ï¼‰
â†’ ç›¸ç•¶æ–¼å¯ä»¥ç„¡é™æ¬¡äº¤æ˜“
â†’ é€€åŒ–ç‚º #122 Best Time to Buy and Sell Stock II

<strong>ç‚ºä»€éº¼ï¼Ÿ</strong>
æœ€å¤šåªèƒ½åš n/2 æ¬¡äº¤æ˜“ï¼ˆæ¯æ¬¡äº¤æ˜“è‡³å°‘éœ€è¦ 2 å¤©ï¼‰
å¦‚æœ k >= n/2ï¼Œk çš„é™åˆ¶å°±å¤±æ•ˆäº†

<strong>å„ªåŒ–ç­–ç•¥ï¼š</strong>
if k >= len(prices) // 2:
    return ç„¡é™æ¬¡äº¤æ˜“çš„è§£æ³•ï¼ˆè²ªå¿ƒï¼‰
                </pre>
            </div>

            <h3>è©³ç´°ç¯„ä¾‹æ¼”ç¤º</h3>
            <div class="visual-box">
                <div class="visual-title">ğŸ” DP è¡¨æ ¼ï¼šk=2, prices=[3,2,6,5,0,3]</div>
                <pre style="background: white; padding: 15px; border-radius: 4px; margin-top: 10px;">
prices = [3, 2, 6, 5, 0, 3]
å¤©æ•¸ i:    0  1  2  3  4  5

<strong>åˆå§‹åŒ–ï¼š</strong>
buy[0][0] = -3, buy[0][1] = -âˆ, buy[0][2] = -âˆ
sell[0][0] = 0, sell[0][1] = 0,  sell[0][2] = 0

<strong>ç¬¬ 1 å¤©ï¼ˆåƒ¹æ ¼ 2ï¼‰ï¼š</strong>
buy[1][0] = max(-3, 0-2) = -2
buy[1][1] = max(-âˆ, 0-2) = -2
sell[1][0] = max(0, -3+2) = 0
sell[1][1] = max(0, -âˆ+2) = 0

<strong>ç¬¬ 2 å¤©ï¼ˆåƒ¹æ ¼ 6ï¼‰ï¼š</strong>
buy[2][0] = max(-2, 0-6) = -2
buy[2][1] = max(-2, 0-6) = -2
sell[2][0] = max(0, -2+6) = 4
sell[2][1] = max(0, -2+6) = 4

<strong>ç¬¬ 3 å¤©ï¼ˆåƒ¹æ ¼ 5ï¼‰ï¼š</strong>
buy[3][0] = max(-2, 0-5) = -2
buy[3][1] = max(-2, 4-5) = -1
sell[3][0] = max(4, -2+5) = 4
sell[3][1] = max(4, -2+5) = 4

<strong>ç¬¬ 4 å¤©ï¼ˆåƒ¹æ ¼ 0ï¼‰ï¼š</strong>
buy[4][0] = max(-2, 0-0) = 0
buy[4][1] = max(-1, 4-0) = 4
sell[4][0] = max(4, 0+0) = 4
sell[4][1] = max(4, -1+0) = 4

<strong>ç¬¬ 5 å¤©ï¼ˆåƒ¹æ ¼ 3ï¼‰ï¼š</strong>
buy[5][0] = max(0, 0-3) = 0
buy[5][1] = max(4, 4-3) = 4
sell[5][0] = max(4, 0+3) = 4
sell[5][1] = max(4, 4+3) = 7 âœ“

<strong>ç­”æ¡ˆï¼š</strong>sell[5][2] = 7
                </pre>
            </div>
        </div>

        <div class="section">
            <h2>ç¨‹å¼ç¢¼å¯¦ç¾</h2>
            
            <div class="code-block">
                <div class="lang-tabs">
                    <button class="lang-tab active" onclick="switchLang(event, 'python')">Python</button>
                    <button class="lang-tab" onclick="switchLang(event, 'cpp')">C++</button>
                    <button class="lang-tab" onclick="switchLang(event, 'java')">Java</button>
                </div>

                <div id="python" class="code-content active">
                    <pre><code class="language-python"># æ–¹æ³•ä¸€ï¼šDPï¼ˆæ¨™æº–è§£æ³• + å„ªåŒ–ï¼‰
class Solution:
    def maxProfit(self, k: int, prices: List[int]) -> int:
        if not prices or k == 0:
            return 0
        
        n = len(prices)
        
        # å„ªåŒ–ï¼šk å¾ˆå¤§æ™‚ç­‰åŒæ–¼ç„¡é™æ¬¡äº¤æ˜“
        if k >= n // 2:
            return self.maxProfitUnlimited(prices)
        
        # buy[j] = å®Œæˆ j æ¬¡äº¤æ˜“ï¼ŒæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ½¤
        # sell[j] = å®Œæˆ j æ¬¡äº¤æ˜“ï¼Œä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ½¤
        buy = [-float('inf')] * (k + 1)
        sell = [0] * (k + 1)
        
        for price in prices:
            # å¾å¾Œå¾€å‰æ›´æ–°ï¼Œé¿å…è¦†è“‹
            for j in range(k, 0, -1):
                sell[j] = max(sell[j], buy[j] + price)
                buy[j] = max(buy[j], sell[j - 1] - price)
        
        return sell[k]
    
    def maxProfitUnlimited(self, prices):
        """ç„¡é™æ¬¡äº¤æ˜“çš„è²ªå¿ƒè§£æ³•"""
        profit = 0
        for i in range(1, len(prices)):
            if prices[i] > prices[i - 1]:
                profit += prices[i] - prices[i - 1]
        return profit


# æ–¹æ³•äºŒï¼šäºŒç¶­ DPï¼ˆæ›´æ¸…æ™°ï¼‰
class Solution:
    def maxProfit(self, k: int, prices: List[int]) -> int:
        if not prices or k == 0:
            return 0
        
        n = len(prices)
        if k >= n // 2:
            profit = 0
            for i in range(1, n):
                profit += max(0, prices[i] - prices[i - 1])
            return profit
        
        # buy[i][j] = ç¬¬ i å¤©å®Œæˆ j æ¬¡äº¤æ˜“ï¼ŒæŒæœ‰è‚¡ç¥¨
        # sell[i][j] = ç¬¬ i å¤©å®Œæˆ j æ¬¡äº¤æ˜“ï¼Œä¸æŒæœ‰è‚¡ç¥¨
        buy = [[-float('inf')] * (k + 1) for _ in range(n)]
        sell = [[0] * (k + 1) for _ in range(n)]
        
        # åˆå§‹åŒ–ç¬¬ä¸€å¤©
        for j in range(k + 1):
            buy[0][j] = -prices[0]
        
        for i in range(1, n):
            for j in range(k, 0, -1):
                buy[i][j] = max(buy[i - 1][j], sell[i - 1][j] - prices[i])
                sell[i][j] = max(sell[i - 1][j], buy[i - 1][j - 1] + prices[i])
        
        return sell[n - 1][k]


# æ–¹æ³•ä¸‰ï¼šè©³ç´°è¨»è§£ç‰ˆæœ¬
class Solution:
    def maxProfit(self, k: int, prices: List[int]) -> int:
        """
        è‚¡ç¥¨äº¤æ˜“ç³»åˆ—æœ€é›£ç‰ˆæœ¬
        
        ç‹€æ…‹å®šç¾©ï¼š
        buy[j]ï¼šå®Œæˆ j æ¬¡äº¤æ˜“ï¼Œç•¶å‰æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ½¤
        sell[j]ï¼šå®Œæˆ j æ¬¡äº¤æ˜“ï¼Œç•¶å‰ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ½¤
        """
        if not prices or k == 0:
            return 0
        
        n = len(prices)
        
        # é—œéµå„ªåŒ–ï¼šk éå¤§æ™‚çš„è™•ç†
        # å¦‚æœ k >= n//2ï¼Œç­‰åŒæ–¼ç„¡é™æ¬¡äº¤æ˜“
        if k >= n // 2:
            # è²ªå¿ƒï¼šæŠ“ä½æ¯æ¬¡ä¸Šæ¼²
            profit = 0
            for i in range(1, n):
                if prices[i] > prices[i - 1]:
                    profit += prices[i] - prices[i - 1]
            return profit
        
        # åˆå§‹åŒ–
        # buy[j] åˆå§‹ç‚ºè² ç„¡çª®ï¼ˆä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨ï¼‰
        # sell[j] åˆå§‹ç‚º 0ï¼ˆä¸æ“ä½œï¼‰
        buy = [-float('inf')] * (k + 1)
        sell = [0] * (k + 1)
        
        # éæ­·æ¯ä¸€å¤©
        for price in prices:
            # å¾å¾Œå¾€å‰æ›´æ–°ï¼Œé¿å…åŒä¸€å¤©çš„ç‹€æ…‹äº’ç›¸å½±éŸ¿
            for j in range(k, 0, -1):
                # è³£å‡ºï¼šå®Œæˆç¬¬ j æ¬¡äº¤æ˜“
                # é¸æ“‡ï¼šä¿æŒä¸æŒæœ‰ vs ä»Šå¤©è³£å‡º
                sell[j] = max(sell[j], buy[j] + price)
                
                # è²·å…¥ï¼šæº–å‚™ç¬¬ j æ¬¡äº¤æ˜“
                # é¸æ“‡ï¼šä¿æŒæŒæœ‰ vs ä»Šå¤©è²·å…¥
                buy[j] = max(buy[j], sell[j - 1] - price)
        
        # æœ€çµ‚ç­”æ¡ˆï¼šå®Œæˆ k æ¬¡äº¤æ˜“ï¼Œä¸æŒæœ‰è‚¡ç¥¨
        return sell[k]


# æ–¹æ³•å››ï¼šç©ºé–“å„ªåŒ–åˆ° O(k)
class Solution:
    def maxProfit(self, k: int, prices: List[int]) -> int:
        if not prices or k == 0:
            return 0
        
        n = len(prices)
        if k >= n // 2:
            return sum(max(0, prices[i] - prices[i-1]) for i in range(1, n))
        
        buy = [-prices[0]] * (k + 1)
        sell = [0] * (k + 1)
        
        for i in range(1, n):
            for j in range(k, 0, -1):
                sell[j] = max(sell[j], buy[j] + prices[i])
                buy[j] = max(buy[j], sell[j - 1] - prices[i])
        
        return sell[k]
</code></pre>
                </div>

                <div id="cpp" class="code-content">
                    <pre><code class="language-cpp">class Solution {
public:
    int maxProfit(int k, vector<int>& prices) {
        if (prices.empty() || k == 0) return 0;
        
        int n = prices.size();
        
        // k å¾ˆå¤§æ™‚å„ªåŒ–
        if (k >= n / 2) {
            int profit = 0;
            for (int i = 1; i < n; i++) {
                profit += max(0, prices[i] - prices[i - 1]);
            }
            return profit;
        }
        
        vector<int> buy(k + 1, INT_MIN);
        vector<int> sell(k + 1, 0);
        
        for (int price : prices) {
            for (int j = k; j >= 1; j--) {
                sell[j] = max(sell[j], buy[j] + price);
                buy[j] = max(buy[j], sell[j - 1] - price);
            }
        }
        
        return sell[k];
    }
};
</code></pre>
                </div>

                <div id="java" class="code-content">
                    <pre><code class="language-java">class Solution {
    public int maxProfit(int k, int[] prices) {
        if (prices.length == 0 || k == 0) return 0;
        
        int n = prices.length;
        
        // k å¾ˆå¤§æ™‚å„ªåŒ–
        if (k >= n / 2) {
            int profit = 0;
            for (int i = 1; i < n; i++) {
                profit += Math.max(0, prices[i] - prices[i - 1]);
            }
            return profit;
        }
        
        int[] buy = new int[k + 1];
        int[] sell = new int[k + 1];
        Arrays.fill(buy, Integer.MIN_VALUE);
        
        for (int price : prices) {
            for (int j = k; j >= 1; j--) {
                sell[j] = Math.max(sell[j], buy[j] + price);
                buy[j] = Math.max(buy[j], sell[j - 1] - price);
            }
        }
        
        return sell[k];
    }
}
</code></pre>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>è¤‡é›œåº¦åˆ†æ</h2>
            <div class="complexity">
                <div class="complexity-item">
                    <strong>ä¸€ç¶­ DP è§£æ³•ï¼š</strong>
                    <ul>
                        <li>æ™‚é–“è¤‡é›œåº¦ï¼šO(n Ã— k)ï¼Œn æ˜¯å¤©æ•¸</li>
                        <li>ç©ºé–“è¤‡é›œåº¦ï¼šO(k)</li>
                    </ul>
                </div>
                <div class="complexity-item">
                    <strong>äºŒç¶­ DP è§£æ³•ï¼š</strong>
                    <ul>
                        <li>æ™‚é–“è¤‡é›œåº¦ï¼šO(n Ã— k)</li>
                        <li>ç©ºé–“è¤‡é›œåº¦ï¼šO(n Ã— k)</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>é‡é»æç¤º</h2>
            
            <div class="key-point">
                <strong>ğŸ’¡ é—œéµæŠ€å·§ 1ï¼šk çš„å„ªåŒ–</strong>
                <p>ç•¶ k â‰¥ n/2 æ™‚ï¼Œé€€åŒ–ç‚ºç„¡é™æ¬¡äº¤æ˜“å•é¡Œã€‚</p>
            </div>

            <div class="key-point">
                <strong>ğŸ’¡ é—œéµæŠ€å·§ 2ï¼šå¾å¾Œå¾€å‰æ›´æ–°</strong>
                <p>é¿å…åŒä¸€å¤©çš„ç‹€æ…‹äº’ç›¸è¦†è“‹ã€‚</p>
            </div>

            <div class="key-point">
                <strong>ğŸ’¡ é—œéµæŠ€å·§ 3ï¼šè³£å‡ºæ™‚è¨ˆæ•¸</strong>
                <p>äº¤æ˜“åœ¨è³£å‡ºæ™‚æ‰ç®—å®Œæˆï¼Œé€™æ¨£ç‹€æ…‹è½‰ç§»æ›´æ¸…æ™°ã€‚</p>
            </div>

            <div class="note">
                <strong>âš ï¸ å¸¸è¦‹éŒ¯èª¤ï¼š</strong>
                <ul>
                    <li>æ²’æœ‰è™•ç† k å¾ˆå¤§çš„æƒ…æ³ï¼ˆæœƒ TLE æˆ– MLEï¼‰</li>
                    <li>å¾å‰å¾€å¾Œæ›´æ–°å°è‡´ç‹€æ…‹è¦†è“‹</li>
                    <li>åˆå§‹åŒ–éŒ¯èª¤ï¼ˆbuy æ‡‰è©²æ˜¯è² ç„¡çª®ï¼‰</li>
                    <li>äº¤æ˜“è¨ˆæ•¸æ™‚æ©ŸéŒ¯èª¤</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>è‚¡ç¥¨ç³»åˆ—é¡Œç›®ç¸½çµ</h2>
            <ul>
                <li><strong>#121 Best Time to Buy and Sell Stock</strong> - åªèƒ½äº¤æ˜“ 1 æ¬¡ï¼ˆEasyï¼‰</li>
                <li><strong>#122 Best Time to Buy and Sell Stock II</strong> - ç„¡é™æ¬¡äº¤æ˜“ï¼ˆMediumï¼‰</li>
                <li><strong>#123 Best Time to Buy and Sell Stock III</strong> - æœ€å¤š 2 æ¬¡äº¤æ˜“ï¼ˆHardï¼‰</li>
                <li><strong>#188 Best Time to Buy and Sell Stock IV</strong> - æœ€å¤š k æ¬¡äº¤æ˜“ï¼ˆHardï¼‰âœ“</li>
                <li><strong>#309 Best Time to Buy and Sell Stock with Cooldown</strong> - æœ‰å†·å‡æœŸï¼ˆMediumï¼‰</li>
                <li><strong>#714 Best Time to Buy and Sell Stock with Fee</strong> - æœ‰æ‰‹çºŒè²»ï¼ˆMediumï¼‰</li>
            </ul>
        </div>
    </div>

    <script>
        function switchLang(event, lang) {
            const tabs = document.querySelectorAll('.lang-tab');
            const contents = document.querySelectorAll('.code-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(lang).classList.add('active');
        }
        
        hljs.highlightAll();
    </script>
</body>
</html>